# 中断的相关概念

计算机在执行程序过程中，当出现异常情况 (断电等) 或特殊请求 (数据传输等) 时，计算机暂停现行程序的运行，转向对这些异常情况或特殊请求进行处理，处理完毕后再返回到现行程序的中断处，继续执行原程序，这就是 “中断”
- 中断是单片机实时处理内部或外部事件的一种机制
- 中断和异常其本质都是对主程序的 “中断”

中断在嵌入式系统占有极其重要的地位，中断机制使得系统能更有效更合理地发挥效能和提高效率

### 中断处理流程

- 中断请求
  - 中断请求是中断源向CPU发出中断请求信号，此时中断控制系统的**中断请求寄存器**被置位，向 CPU 请求中断
- 中断响应
- 中断服务
- 中断返回

# STM32 中断和异常

## STM32中断和异常向量表

当发生了异常或中断，内核要想响应这些异常或中断，就需要知道这些异常或中断的服务程序的**入口地址**，再由入口地址找到相应的中断服务程序，由中断入口地址组成的表称作中断向量表

## STM32中断优先级

STM32 使用 Cortex-M3 的 8 位优先级寄存器中的 4 位来配置中断优先级，即 STM32 中的 NVIC **只支持 16 级中断优先级**的管理

## STM32中断服务程序

略

# STM32 外部中断 EXTI

EXTI (External interrupt/event controller，外部中断/事件控制器) 支持 19 个外部中断/事件请求，每个中断/事件都有独立的触发和屏蔽设置，具有中断模式和事件模式两种设置模式

### 设置模式

- 中断模式
  - 通过外部信号的边沿产生中断信号传送给 NVIC，触发中断，最终实现中断服务程序的执行
  - 由软件实现相应功能
- 事件模式
  - 产生脉冲将系统从睡眠和停止模式中唤醒，从而产生相应外设的触发信号供外设电路使用
  - 事件属于硬件触发执行的过程

STM32 中，每一个 GPIO 都可以触发一个外部中断

# EXTI 模块的 HAL 库接口函数及应用

略
